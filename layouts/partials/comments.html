<div style="margin-top: 2em;">
  <script src="https://giscus.app/client.js"
    data-repo="bradfeld/adventuresinclaude"
    data-repo-id="R_kgDORQlALw"
    data-category="General"
    data-category-id="DIC_kwDORQlAL84C2dyo"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="top"
    data-theme="preferred_color_scheme"
    data-lang="en"
    data-loading="lazy"
    crossorigin="anonymous"
    async>
  </script>
  <script>
  // Sync Giscus comments theme with site light/dark mode
  (function() {
    function getGiscusTheme() {
      var dt = document.documentElement.getAttribute('data-theme');
      return dt === 'dark' ? 'dark' : 'light';
    }

    function setGiscusTheme(theme) {
      var iframe = document.querySelector('iframe.giscus-frame');
      if (!iframe) return;
      iframe.contentWindow.postMessage(
        { giscus: { setConfig: { theme: theme } } },
        'https://giscus.app'
      );
    }

    // Watch for light/dark toggle changes (PaperMod sets data-theme)
    var observer = new MutationObserver(function(mutations) {
      mutations.forEach(function(m) {
        if (m.attributeName === 'data-theme') {
          setGiscusTheme(getGiscusTheme());
        }
      });
    });
    observer.observe(document.documentElement, { attributes: true, attributeFilter: ['data-theme'] });

    // Set initial theme once Giscus iframe loads
    window.addEventListener('message', function(event) {
      if (event.origin !== 'https://giscus.app') return;
      if (!(typeof event.data === 'object' && event.data.giscus)) return;
      setGiscusTheme(getGiscusTheme());
    });
  })();
  </script>
</div>
